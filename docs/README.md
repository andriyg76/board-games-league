# Індекс документації

*[English version](README.en.md)*

## Керування сесіями та обліковими записами

- **[SESSION_MANAGEMENT.md](SESSION_MANAGEMENT.md)** - Повний посібник системи керування сесіями, включаючи:
  - Огляд архітектури
  - Система токенів (токени обертання та токени дії)
  - Документація компонентів
  - Конфігурація
  - Приклади використання
  - Функції безпеки
  - Усунення проблем

- **[API_REFERENCE.md](API_REFERENCE.md)** - Повна документація API:
  - Точки доступу аутентифікації
  - Користувацькі точки доступу
  - Адміністративні точки доступу
  - Точки доступу типів ігор
  - Точки доступу ігрових раундів
  - Точки доступу гравців
  - Формати запитів/відповідей
  - Коди помилок
  - Потік аутентифікації

## Керування іграми

- **[GAME_MANAGEMENT.md](GAME_MANAGEMENT.md)** - Повний посібник функцій керування іграми:
  - Налаштування типів ігор
  - Типи підрахунку очок (класичний, кооперативний, командний, мафія)
  - Мітки та команди
  - Життєвий цикл ігрових раундів
  - Керування гравцями
  - Система рекомендацій гравців на основі історії ігор
  - Клієнтські компоненти
  - Приклади API
  - Колекції бази даних

## Система ліг

- **[LEAGUES.md](LEAGUES.md)** - Повна документація системи ліг:
  - Концепція та вимоги
  - Архітектура моделей даних
  - API документація (всі endpoints)
  - Система запрошень та членства
  - Таблиці лідерів та система очок
  - Рекомендації гравців на основі історії ігор
  - Віртуальні гравці та інвайти
  - Колекції бази даних
  - Frontend інтеграція
  - Покращення UX та рекомендації
  - Важливі примітки та деталі реалізації

## Спеціалізовані ігри

- **[WIZARD_GAME_SCORING.md](WIZARD_GAME_SCORING.md)** - Система підрахунку очок для гри Wizard:
  - Концепція та функціональність
  - Архітектура (Backend та Frontend)
  - API endpoints та приклади
  - Логіка підрахунку очок
  - Компоненти Vue та TypeScript типи
  - Потік гри (створення, раунди, завершення)
  - Ключові особливості та технічні деталі
  - Чеклист тестування
  - Майбутні покращення

## Ключові функції

### Керування іграми
- Множинні типи підрахунку очок (класичний, кооперативний, команда проти команди, мафія)
- Налаштування типів ігор з мітками та командами
- Відстеження ігрових раундів з часом початку/завершення
- Відстеження очок та позицій гравців
- Командні очки для командних ігор
- Підтримка кооперативного підрахунку очок
- Інтелектуальний вибір гравців на основі історії спільних ігор (для ліг)
- Автозаповнення гравців при створенні раунду
- Створення віртуальних гравців "на льоту"

### Керування сесіями
- Гібридна система токенів (токени обертання + токени дії)
- Автоматичне обертання токенів кожні 12 годин
- Відстеження сесій з IP адресою та user agent
- Інтеграція геолокації
- Множинні одночасні сесії на користувача

### Безпека
- HTTP-only cookies для токенів дії
- Налаштування Secure, SameSite для cookies
- Завершення терміну дії та обертання токенів
- Завершення терміну дії сесій (30 днів)
- Оптимістичне блокування для конкурентності

### Діагностика
- Точка доступу діагностики тільки для адмінів
- Інформація про запити (IP, походження, user agent)
- Дані геолокації
- Відображення конфігурації сервера
- Валідація довірених джерел
- Інформація про збірку (версія, коміт, гілка, дата)

### Функції користувача
- Відображення інформації про сесії
- Список активних сесій
- Індикатор поточної сесії
- Відображення географічного місцезнаходження
- Відстеження активності сесій
- Керування профілем гравця

### Система ліг
- Ізольовані конкурентні контексти для змагань
- Система запрошень та членства
- Таблиці лідерів з очками та рейтингами
- Система очок (участь, позиція, модерація)
- Рекомендації гравців на основі історії спільних ігор
- Віртуальні гравці та інвайти
- Кешування останніх спільних гравців

## Початок роботи

1. Налаштуйте змінні середовища (див. [SESSION_MANAGEMENT.md](SESSION_MANAGEMENT.md#конфігурація))
2. Налаштуйте підключення до MongoDB
3. Налаштуйте облікові дані Google OAuth
4. Встановіть зовнішні ID супер-адміністраторів
5. (Опціонально) Налаштуйте довірені джерела

## Огляд архітектури

```
┌─────────────┐
│   Клієнт    │
│  (Браузер)  │
└──────┬──────┘
       │
       │ HTTP запити
       │ (cookie actionToken)
       │
┌──────▼──────────┐
│   Backend API   │
│  (Go/Chi Router)│
└──────┬──────────┘
       │
       ├──────────┐
       │          │
┌──────▼──────┐  │  ┌──────────────┐
│   MongoDB   │  │  │  GeoIP API   │
│  (Sessions) │  │  │ (ipinfo.io)  │
└─────────────┘  │  └──────────────┘
                 │
       ┌─────────┘
       │
┌──────▼──────┐
│   Сервіси   │
│  - Session  │
│  - Request  │
│  - GeoIP    │
└─────────────┘
```

## Пов'язана документація

- Backend код: `backend/`
- Frontend код: `frontend/`
- Конфігурація: Змінні середовища
- База даних: Колекції та індекси MongoDB
